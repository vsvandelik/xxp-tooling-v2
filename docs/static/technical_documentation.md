---
title: Technical Documentation
group: Documentation
category: Technical Reference
---

# Technical Documentation

A comprehensive technical reference for the ExtremeXP Tooling v2 monorepo - a TypeScript-based ecosystem for experimental programming with ESPACE and XXP domain-specific languages.

## Architecture Overview

The XXP Tooling project implements a layered architecture with clear separation of concerns across 8 interconnected packages:

```
┌─────────────────────────────────────────────────────────────┐
│                    VS Code Extension                       │
│              (User Interface & Integration)                │
├─────────────────┬─────────────────┬─────────────────────────┤
│  Language       │  Experiment     │  Workflow               │
│  Server         │  Runner         │  Repository             │
│  (LSP Features) │  (Execution)    │  (Management)           │
├─────────────────┴─────────────────┴─────────────────────────┤
│              Artifact Generator                            │
│             (Code Generation)                              │
├─────────────────────────────────────────────────────────────┤
│                    Core Package                            │
│         (Language Parsing, ANTLR Grammars, Utilities)      │
└─────────────────────────────────────────────────────────────┘
```

### Core Components

#### [@extremexp/core](packages/core/README.md)
Foundation package providing ANTLR-generated parsers and shared utilities:
- **ESPACE Parser/Lexer**: For experiment space definition language (`.espace` files)
- **XXP Parser/Lexer**: For workflow definition language (`.xxp` files)  
- **Grammar Definitions**: ANTLR4 source files (`ESPACE.g4`, `XXP.g4`)
- **Naming Utilities**: Consistent file naming conventions

#### [@extremexp/artifact-generator](packages/artifact-generator/README.md)
CLI tool and library for transforming ESPACE experiments into executable JSON artifacts:
- **Parsing & Validation**: Syntax and semantic validation of experiment files
- **Dependency Resolution**: Task, parameter, and data flow resolution
- **Inheritance Support**: Workflow inheritance with override capabilities
- **Artifact Generation**: JSON output optimized for execution

#### [@extremexp/language-server](packages/language-server/README.md)
Language Server Protocol implementation providing IDE features:
- **Code Completion**: Context-aware suggestions for XXP/ESPACE
- **Diagnostics**: Real-time error detection and validation
- **Symbol Navigation**: Go-to-definition, find references, hover information
- **Document Analysis**: Symbol table construction and cross-reference tracking

### Execution Layer

#### [@extremexp/experiment-runner](packages/experiment-runner/README.md)
Local experiment execution engine with state management:
- **Artifact Execution**: Runs JSON artifacts generated by artifact-generator
- **State Persistence**: SQLite database for experiment history and resumption
- **Progress Tracking**: Real-time execution monitoring with callbacks
- **User Interaction**: Support for experiments requiring runtime input

#### [@extremexp/experiment-runner-server](packages/experiment-runner-server/README.md)
Express server providing remote execution capabilities:
- **HTTP API**: RESTful endpoints for experiment management
- **WebSocket Support**: Real-time progress updates and bi-directional communication
- **Multi-client Support**: Concurrent experiment execution and monitoring

### Workflow Management

#### [@extremexp/workflow-repository](packages/workflow-repository/README.md)
Client library for workflow storage and sharing:
- **Local Repository**: File system-based workflow management
- **Remote Repository**: HTTP client for repository servers
- **Metadata Management**: Workflow versioning, authoring, and attachment handling

#### [@extremexp/workflow-repository-server](packages/workflow-repository-server/README.md)
Express server for hosting workflow repositories:
- **Workflow Storage**: Persistent workflow and attachment storage
- **Authentication**: User management and access control
- **API Endpoints**: RESTful API for workflow CRUD operations

### Development Integration

#### [@extremexp/vs-code-extension](packages/vs-code-extension/README.md)
Comprehensive VS Code extension integrating all toolchain components:
- **Language Support**: Syntax highlighting and LSP integration
- **Experiment Management**: Artifact generation and execution from IDE
- **Progress Visualization**: WebView-based progress tracking panels
- **Repository Integration**: Built-in workflow browser and management

## Languages Supported

### XXP (eXtreme eXPeriment Processing Language)
Workflow definition language for describing experimental processes:

**File Extension**: `.xxp`

**Key Features**:
- Task definitions with input/output specifications
- Workflow inheritance and modular design
- Task chaining and data flow management
- Implementation file references

**Example**:
```xxp
workflow MLWorkflow from BaseWorkflow {
  define data trainingData = "data/processed_training.csv";
  define data trainedModel;
  
  define task preprocess;
  define task train;
  define task validate;
  
  start -> preprocess -> train -> validate -> end;
  
  configure task train {
    implementation "training/train_model.py";
    param epochs = 100;
    param learningRate;
    input trainingData;
    output trainedModel;
  }
}
```

### ESPACE (Experiment Space Definition Language)
Experiment specification language for parameter exploration:

**File Extension**: `.espace`

**Key Features**:
- Parameter space definitions with enum/range types
- Execution strategy specification (gridsearch, random)
- Control flow with conditional transitions
- Multi-space experiment orchestration

**Example**:
```espace
experiment OptimizationExperiment {
  space hyperparameterSearch of MLWorkflow {
    strategy gridsearch;
    param learningRate = range(0.001, 0.1, 0.001);
    param batchSize = enum(16, 32, 64, 128);
    param optimizer = enum("adam", "sgd", "rmsprop");
  }
  
  control {
    start -> hyperparameterSearch -> end;
  }
  
  define data dataset = "data/training_set.csv";
}
```

## Development Commands

### Workspace-Level Commands

```bash
# Install all dependencies
npm install

# Build all packages
npm run build

# Build packages in watch mode
npm run build:watch

# Clean all build outputs
npm run clean

# Run tests across all packages
npm test

# Run tests with coverage
npm run test:coverage

# Lint all packages
npm run lint

# Fix linting issues
npm run lint:fix

# Format code with Prettier
npm run format

# Type checking
npm run type-check

# Generate API documentation
npm run docs:generate

# Serve documentation locally
npm run docs:dev
```

### Package-Specific Development

```bash
# Work on specific package
cd packages/core
npm run build:watch        # Build in watch mode
npm run test:watch         # Run tests in watch mode

# CLI tools usage
cd packages/artifact-generator
npm run cli -- experiment.espace --output artifact.json

cd packages/experiment-runner
npm run cli -- run-experiment artifact.json

# Language server development
cd packages/language-server
npm run dev                # Start in development mode
```

## API Integration

### Artifact Generation
```typescript
import { ArtifactGenerator } from '@extremexp/artifact-generator';

const generator = new ArtifactGenerator({ verbose: true });
const result = await generator.generate('experiment.espace');
```

### Experiment Execution
```typescript
import { ExperimentExecutor } from '@extremexp/experiment-runner';

const executor = new ExperimentExecutor('./experiments.db');
await executor.run('artifact.json', {
  resume: true,
  progressCallback: {
    onProgress: (progress, message) => {
      console.log(`${(progress * 100).toFixed(1)}% - ${message}`);
    }
  }
});
```

### Language Processing
```typescript
import { ESPACEParser, ESPACELexer } from '@extremexp/core';
import * as antlr from 'antlr4ng';

const input = antlr.CharStream.fromString(espaceContent);
const lexer = new ESPACELexer(input);
const tokens = new antlr.CommonTokenStream(lexer);
const parser = new ESPACEParser(tokens);
const tree = parser.program();
```

## Configuration & Settings

### TypeScript Configuration
The project uses modern TypeScript with:
- **Strict mode**: All strict type checking enabled
- **ES2022 target**: Modern JavaScript features
- **Project references**: Optimized monorepo builds
- **Composite builds**: Fast incremental compilation

### Testing Framework
Jest with TypeScript and ESM support:
```bash
# Per-package test configuration
packages/*/jest.config.js

# Shared test utilities
packages/*/test/setup.ts
```

### Documentation Generation
TypeDoc configuration for API documentation:
```bash
# Root configuration
typedoc.json

# Package-specific configs
packages/*/typedoc.json
```

## File Naming Conventions

- **ESPACE files**: camelCase names, `.espace` extension
- **XXP files**: camelCase names, `.xxp` extension  
- **Implementation files**: Referenced by relative paths from workflow files
- **Generated artifacts**: JSON format with experiment name prefix

## Error Handling & Validation

### Comprehensive Validation
- **Syntax validation**: ANTLR-based parsing with detailed error reporting
- **Semantic validation**: Cross-reference checking and dependency validation
- **Control flow validation**: Reachability analysis and cycle detection
- **File validation**: Implementation file existence and path verification

### Error Categories
- **Parse errors**: Syntax issues in ESPACE/XXP files
- **Reference errors**: Missing task, workflow, or parameter references
- **Dependency errors**: Circular dependencies or unresolvable chains
- **Execution errors**: Runtime failures during experiment execution

## Extension Points

### Custom Visitors
```typescript
import { ESPACEVisitor } from '@extremexp/core';

class CustomAnalysisVisitor extends ESPACEVisitor<void> {
  visitExperimentDeclaration(ctx: any): void {
    // Custom processing logic
    this.visitChildren(ctx);
  }
}
```

### Custom Repository Implementation
```typescript
import { DatabaseRepository } from '@extremexp/experiment-runner';

class CustomRepository implements DatabaseRepository {
  async initialize(): Promise<void> {
    // Custom storage initialization
  }
  // Implement required methods...
}
```

### Custom Progress Callbacks
```typescript
const progressCallback = {
  onTaskStart: (taskId, params) => console.log(`Starting ${taskId}`),
  onTaskComplete: (taskId, params, outputs) => console.log(`Completed ${taskId}`),
  onProgress: (progress, message) => console.log(`${progress * 100}% - ${message}`)
};
```

## Performance Considerations

- **ANTLR Parser Caching**: Generated parsers are reused across multiple files
- **Incremental Builds**: TypeScript project references enable fast rebuilds
- **Database Connection Pooling**: SQLite connections are reused in experiment runner
- **WebSocket Optimization**: Real-time updates without HTTP polling overhead
- **Tool Bundling**: VS Code extension bundles tools to reduce startup time

## Troubleshooting

### Common Issues

#### TypeScript Compilation Errors
```bash
# Clean and rebuild
npm run clean
npm run build
```

#### ANTLR Generation Issues
```bash
# Regenerate language parsers
cd packages/core
npm run antlr
```

#### VS Code Extension Issues
```bash
# Clear tool cache and restart language server
# In VS Code: Ctrl+Shift+P -> "ExtremeXP: Restart Language Server"
```

#### Database Issues
```bash
# Reset experiment database
rm -f experiments.db
# Database will be recreated on next run
```

### Debug Logging

Enable detailed logging for troubleshooting:
```typescript
// Experiment runner verbose mode
const executor = new ExperimentExecutor('./experiments.db', { verbose: true });

// Artifact generator debugging
const generator = new ArtifactGenerator({ verbose: true });
```

## Dependencies & Compatibility

### Core Dependencies
- **Node.js**: >= 18.0.0
- **npm**: >= 9.0.0
- **TypeScript**: ^5.0.0
- **ANTLR4**: antlr4ng runtime and CLI

### Runtime Dependencies
- **Express**: Web server framework for API servers
- **SQLite3**: Database engine for experiment persistence
- **WebSocket**: Real-time communication support
- **Commander**: CLI argument parsing

### Development Dependencies
- **Jest**: Testing framework with TypeScript support
- **ESLint**: Code linting and style enforcement
- **Prettier**: Code formatting
- **TypeDoc**: API documentation generation

## License & Contributing

**License**: MIT

For contributing guidelines, see the main project README and individual package documentation. All contributions should include tests and follow the established TypeScript coding standards.